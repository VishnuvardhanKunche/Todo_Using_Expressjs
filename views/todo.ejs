<h5 class="text-lg font-semibold text-gray-700 mb-2">
  <%= title %> (<%= todos.length %>)
</h5>

<ul class="list-none pl-0 mb-6">
  <% if (!todos || todos.length === 0) { %>
    <li class="text-gray-400 italic mb-2">No todos here ðŸŽ‰</li>
  <% } %>

  <% todos.forEach(function(todo, i) { %>
    <li class="Todo-Item flex items-center justify-between mb-2 p-2 rounded hover:bg-gray-50">
      <div class="flex items-center">
        <!-- Checkbox form: toggles completion via POST for browser -->
        <form action="/todos/<%= todo.id %>/set-completion" method="POST" class="mr-3">
          <% if (csrfToken) { %>
            <input type="hidden" name="_csrf" value="<%= csrfToken %>" />
          <% } %>
          <input type="hidden" name="completed" value="<%= !todo.completed %>" />
          <input type="checkbox" <%= todo.completed ? "checked" : "" %> onchange="this.form.submit()" class="w-4 h-4" />
        </form>

        <div class="<%= todo.completed ? 'line-through text-gray-400' : '' %>">
          <div class="text-sm font-medium"><%= todo.title %></div>
          <div class="text-xs text-gray-500">Due: <%= todo.dueDate ? todo.dueDate : 'â€”' %></div>
        </div>
      </div>

      <div class="flex items-center">
        <!-- Delete form -->
        <form action="/todos/<%= todo.id %>/delete" method="POST" onsubmit="return confirm('Delete this todo?');">
          <% if (csrfToken) { %>
            <input type="hidden" name="_csrf" value="<%= csrfToken %>" />
          <% } %>
          <button type="submit" class="trash-icon hidden hover:text-red-600"> 
            <!-- heroicon svg -->
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 
              01-1.995-1.858L5 7m5 4v6m4-6v6M9 7V4a1 1 0 011-1h4a1 1 0 011 1v3" />
            </svg>
          </button>
        </form>
      </div>
    </li>
  <% }) %>
</ul>

<style>
  /* show delete icon on hover of the list item */
  .Todo-Item:hover .trash-icon { display: inline; }
  .trash-icon { display: none; }
</style>
